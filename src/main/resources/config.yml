# AfterCore - Configuração base
#
# Regra: ZERO I/O na main thread. Tudo que tocar DB deve ser async.

# Versão do config (usado para migrations automáticas)
config-version: 2

debug: false

database:
  enabled: true

  # Pool defaults (herdados por todos os datasources)
  pool:
    maximum-pool-size: 10
    minimum-idle: 2
    connection-timeout: 30000
    idle-timeout: 600000
    max-lifetime: 1800000

  # =====================================================================
  # MULTI-DATASOURCE (v2.0+)
  # =====================================================================
  # Cada datasource tem nome próprio, tipo, configuração e pool isolado.
  # O datasource "default" é usado pelos métodos retrocompatíveis.
  
  datasources:
    # Datasource principal (gameplay, inventories, etc)
    default:
      type: "mysql"
      mysql:
        host: "localhost"
        port: 3306
        database: "afterlands"
        username: "root"
        password: ""
      # Pool override (opcional - herda de pool acima se não especificado)
      # pool:
      #   maximum-pool-size: 15

    # Exemplo: Analytics/Auditoria (separado para não impactar gameplay)
    # analytics:
    #   type: "mysql"
    #   mysql:
    #     host: "localhost"
    #     port: 3306
    #     database: "afterlands_analytics"
    #     username: "root"
    #     password: ""
    #   pool:
    #     maximum-pool-size: 5
    #     minimum-idle: 1

    # Exemplo: Dev local (SQLite)
    # local:
    #   type: "sqlite"
    #   sqlite:
    #     file: "local-data.db"
    #     connection-init-sql: "PRAGMA foreign_keys=ON;"

concurrency:
  # Threads para tarefas bloqueantes (DB / I/O). Ajustar conforme hardware.
  io-threads: 8
  # Threads para CPU-bound (parsing pesado, compilação de frames, etc.)
  cpu-threads: 4

protocol:
  # Intervalo de debounce em ms. Chunks marcados dentro desta janela são coalescidos.
  batch-interval-ms: 50
  # Máximo de chunks processados por batch por player.
  max-chunks-per-batch: 16

commands:
  help:
    # Número de subcomandos exibidos por página no help
    page-size: 7
